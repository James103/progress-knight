<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Nested UI</title>
    <link rel="stylesheet" type="text/css" href="vendor/bootstrap-5.3.1/bootstrap.min.css">
    <style>
        body {
            background-color: rgb(32, 32, 32);
            color: white;
        }

        main {
            margin: 1rem auto;
            max-width: 90%;
            margin-bottom: calc(100vh - 281px);
        }

        .level1 {
        }

        .level1 + .level1 {
            margin-top: 1rem;
        }

        .level1-header > div:nth-child(2) {
            font-weight: normal;
        }

        .level1-header {
            position: sticky;
            top: 0;
            background: inherit;
            z-index: 3;
        }

        .level1-header > div:first-child {
            width: 45rem;
        }

        .level1-header + .level2 {
            /*margin-top: 0.5rem;*/
        }

        .level2 + .level2 {
            margin-top: 1rem;
        }

        .level2.inactive {
            filter: grayscale(1);
        }

        .level2-header {
            position: sticky;
            top: 45px;
            /*background: inherit;*/
            z-index: 2;
            /*margin-left: -0.5rem;*/
            /*margin-right: -0.5rem;*/
        }

        .level2-header > div {
            margin-right: 1rem;
        }

        .level2-header > div:first-child {
            width: 19.5rem;
        }

        .level2-header > div:nth-child(2) {
        }

        .level2-header > div:nth-child(3) {
            width: 7em;
        }

        .level2-header + .table {
            /*margin-top: 0.25rem;*/
        }

        /*  .level2-header .pk-progress-fill.current {
              background-color: brown;
          }*/

        .level2 > .table + .table {
            margin-top: 0.5rem;
        }

        .level3 {
            position: sticky;
            top: 98px;
            z-index: 1;
        }

        /*        tr[title] > td:first-of-type:after {
                    content: '?';
                    display: inline-block;
                    margin-left: 0.5rem;
                    border-radius: 50%;
                    border: 1px solid currentColor;
                    padding: 0 0.525em;
                    opacity: 0.7;
                    float: right;
                }

                tr[title] .pk-progress-bar {
                    width: calc(100% - 26px);
                }*/

        /*       tr[title] {
                   cursor: help;
               }*/


        .table td:first-of-type,
        .table th:first-of-type {
            width: 20rem;
        }

        .table td {
            vertical-align: middle;
        }

        /* Copied from actual game */
        .pk-progress-text {
            position: absolute;
            top: 0px;
            bottom: 0px;
            padding: 5px;
            color: white
        }

        .pk-progress-bar {
            position: relative;
            background-color: rgb(12, 101, 173);
            cursor: pointer;
            width: 100%; /*Adjusted*/
        }

        .pk-progress-fill {
            height: 30px;
            background-color: rgb(46, 148, 231)
        }

        .pk-progress-fill.current {
            background-color: orange;
        }

        .pk-progress-text {
            text-shadow: 1px 1px black;
            line-height: normal;
        }

        .pk-progress-fill {
            /* Smooth out progress bar filling */
            transition: width 50ms linear; /* TODO Don't transition when resetting a bar */
        }

        .lead .pk-progress-fill {
            height: calc(30px * 1.25);
        }

        .pk-tooltip {
            position: relative;
            /*display: inline-block;*/ /*Removed*/
        }

        .pk-tooltip .pk-tooltipText {
            visibility: hidden;
            width: 240px;
            background-color: black;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 10px 0;

            /* Position the pk-tooltip */
            position: absolute;
            z-index: 5; /*Adjusted*/
            top: -5px;
            left: 105%;

            opacity: 0;
            transition: opacity 0.5s;
        }

        .pk-tooltip:hover .pk-tooltipText {
            visibility: visible;
            opacity: 0.8;
        }

        .pk-tooltip .pk-tooltipText:empty {
            display: none;
        }
    </style>
</head>
<body data-bs-theme="dark">
<main>
<!--    TODO find a nice solution to decrease spacing for headers when stuck -->
    <div class="level1">
        <div class="level1-header h4 d-flex justify-content-start py-2 px-2 mb-0"
             style="background-color: rgb(199, 21, 133);">
            <div>
                Industry
            </div>
            <div>
                (4.29)
            </div>
        </div>
        <div class="level2 ps-3">
            <div class="level2-header bg-light text-dark lead d-flex justify-content-start py-2 px-2">
                <div>
                    <div class="pk-progress-bar progressBar pk-tooltip">
                        <div class="pk-progress-fill progressFill current" style="width: 63%;"></div>
                        <div class="pk-progress-text name">Mining Bay</div>
                        <span class="pk-tooltipText"></span>
                    </div>
                </div>
                <div>
                    Level: 32
                </div>
                <div>
                    <div class="form-check form-switch form-check-reverse">
                        <input class="form-check-input" type="checkbox" role="switch" id="switch1" checked>
                        <label class="form-check-label" for="switch1">Active</label>
                    </div>
                </div>
            </div>
            <div class="table-container ps-3">
                <table class="table mb-0">
                    <thead class="level3">
                    <tr>
                        <th>Drills</th>
                        <th>Level</th>
                        <th>Energy Cost</th>
                        <th>Effect</th>
                        <th>Xp/Cycle</th>
                        <th>Xp left</th>
                        <th>Max level</th>
                    </tr>
                    </thead>
                    <tbody class="level4">
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill" style="width: 54.0719%;"></div>
                                <div class="pk-progress-text name">Basic Bitch Co. Drills</div>
                                <span class="pk-tooltipText"></span>
                            </div>
                        </td>
                        <td>53</td>
                        <td>259W</td>
                        <td>x1.13 Industry</td>
                        <td>1.6k</td>
                        <td>45.5k</td>
                        <td>124</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill" style="width: 14.0719%;"></div>
                                <div class="pk-progress-text name">Shark Teeth Drills</div>
                                <span class="pk-tooltipText"></span>
                            </div>
                        </td>
                        <td>21</td>
                        <td>1.45kW</td>
                        <td>x3.25 Industry</td>
                        <td>1.6k</td>
                        <td>84.1k</td>
                        <td>35</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill current" style="width: 84.0719%;"></div>
                                <div class="pk-progress-text name">TenDrills</div>
                                <span class="pk-tooltipText"></span>
                            </div>
                        </td>
                        <td>4</td>
                        <td>4.22kW</td>
                        <td>x5.00 Industry</td>
                        <td>624</td>
                        <td>54.3k</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill" style="width: 0.0719%;"></div>
                                <div class="pk-progress-text name">Super Orbital Disintegration Ray</div>
                                <span class="pk-tooltipText"></span>
                            </div>
                        </td>
                        <td>0</td>
                        <td>1.45kW</td>
                        <td>x3.25 Industry</td>
                        <td>4.0 k</td>
                        <td>1.6M</td>
                        <td>0</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="level2 ps-3">
            <div class="level2-header bg-light text-dark lead d-flex justify-content-start py-2 px-2">
                <div>
                    <div class="pk-progress-bar progressBar pk-tooltip">
                        <div class="pk-progress-fill progressFill current" style="width: 25%;"></div>
                        <div class="pk-progress-text name">Refinery</div>
                        <span class="pk-tooltipText"></span>
                    </div>
                </div>
                <div>
                    Level: 32
                </div>
                <div>
                    <div class="form-check form-switch form-check-reverse">
                        <input class="form-check-input" type="checkbox" role="switch" id="switch2" checked>
                        <label class="form-check-label" for="switch2">Active</label>
                    </div>
                </div>
            </div>
            <div class="table-container ps-3">
                <table class="table mb-0">
                    <thead class="level3">
                    <tr>
                        <th>Ore Extraction</th>
                        <th>Level</th>
                        <th>Energy Cost</th>
                        <th>Effect</th>
                        <th>Xp/Cycle</th>
                        <th>Xp left</th>
                        <th>Max level</th>
                    </tr>
                    </thead>
                    <tbody class="level4">
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill" style="width: 74.0719%;"></div>
                                <div class="pk-progress-text name">Plasma Extractors</div>
                                <span class="pk-tooltipText">Utilizes advanced plasma technology to extract valuable minerals from asteroids, yielding higher resource quantities.</span>
                            </div>
                        </td>
                        <td>53</td>
                        <td>259W</td>
                        <td>x1.13 Industry</td>
                        <td>1.6k</td>
                        <td>45.5k</td>
                        <td>124</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill" style="width: 24.0719%;"></div>
                                <div class="pk-progress-text name">Quantum Synthesizers</div>
                                <span class="pk-tooltipText">Manipulates quantum fluctuations to refine ores, resulting in increased resource purity and quality.</span>
                            </div>
                        </td>
                        <td>21</td>
                        <td>1.45kW</td>
                        <td>x3.25 Industry</td>
                        <td>1.6k</td>
                        <td>84.1k</td>
                        <td>35</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill current" style="width: 44.0719%;"></div>
                                <div class="pk-progress-text name">Cosmic Alchemy Chamber</div>
                                <span class="pk-tooltipText">Applies ancient alchemical principles to transmute basic elements into rare and exotic materials.</span>
                            </div>
                        </td>
                        <td>4</td>
                        <td>4.22kW</td>
                        <td>x5.00 Industry</td>
                        <td>624</td>
                        <td>54.3k</td>
                        <td>0</td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="table-container ps-3">
                <table class="table mb-0">
                    <thead class="level3">
                    <tr>
                        <th>Resource Processing</th>
                        <th>Level</th>
                        <th>Energy Cost</th>
                        <th>Effect</th>
                        <th>Xp/Cycle</th>
                        <th>Xp left</th>
                        <th>Max level</th>
                    </tr>
                    </thead>
                    <tbody class="level4">
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill" style="width: 24.0719%;"></div>
                                <div class="pk-progress-text name">Molecular Forge</div>
                                <span class="pk-tooltipText">Breaks down raw materials at the molecular level, enabling precise resource customization and alloy creation.</span>
                            </div>
                        </td>
                        <td>53</td>
                        <td>259W</td>
                        <td>x1.13 Industry</td>
                        <td>1.6k</td>
                        <td>45.5k</td>
                        <td>124</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill current" style="width: 34.0719%;"></div>
                                <div class="pk-progress-text name">Chrono-Smelter</div>
                                <span class="pk-tooltipText">Temporally accelerates the smelting process, leading to faster resource production with minimal energy expenditure.</span>
                            </div>
                        </td>
                        <td>21</td>
                        <td>1.45kW</td>
                        <td>x3.25 Industry</td>
                        <td>1.6k</td>
                        <td>84.1k</td>
                        <td>35</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill" style="width: 16.0719%;"></div>
                                <div class="pk-progress-text name">Nebula Infusion Array</div>
                                <span class="pk-tooltipText">Channels energy from cosmic nebulae to infuse resources with mystical properties, enhancing their usability in unique ways.</span>
                            </div>
                        </td>
                        <td>4</td>
                        <td>4.22kW</td>
                        <td>x5.00 Industry</td>
                        <td>624</td>
                        <td>54.3k</td>
                        <td>0</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="level1">
        <div class="level1-header h4 d-flex justify-content-start py-2 px-2 mb-0" style="background-color: rgb(85, 166, 48);">
            <div>
                Engineering
            </div>
            <div>
                (4.29)
            </div>
        </div>
        <div class="level2 ps-3 inactive">
            <div class="level2-header bg-light text-dark lead d-flex justify-content-start py-2 px-2">
                <div>
                    <div class="pk-progress-bar progressBar pk-tooltip">
                        <div class="pk-progress-fill progressFill current" style="width: 95%;"></div>
                        <div class="pk-progress-text name">Engine</div>
                        <span class="pk-tooltipText"></span>
                    </div>
                </div>
                <div>
                    Level: 32
                </div>
                <div>
                    <div class="form-check form-switch form-check-reverse">
                        <input class="form-check-input" type="checkbox" role="switch" id="switch3">
                        <label class="form-check-label" for="switch3">Disabled</label>
                    </div>
                </div>
            </div>
            <div class="table-container ps-3">
                <table class="table mb-0">
                    <thead class="level3">
                    <tr>
                        <th>Thrusters</th>
                        <th>Level</th>
                        <th>Energy Cost</th>
                        <th>Effect</th>
                        <th>Xp/Cycle</th>
                        <th>Xp left</th>
                        <th>Max level</th>
                    </tr>
                    </thead>
                    <tbody class="level4">
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill current" style="width: 4.0719%;"></div>
                                <div class="pk-progress-text name">Photon Engine</div>
                                <span class="pk-tooltipText"></span>
                            </div>
                        </td>
                        <td>53</td>
                        <td>259W</td>
                        <td>x1.13 Speed</td>
                        <td>1.6k</td>
                        <td>45.5k</td>
                        <td>124</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill" style="width: 47.0719%;"></div>
                                <div class="pk-progress-text name">Unreal Engine</div>
                                <span class="pk-tooltipText"></span>
                            </div>
                        </td>
                        <td>21</td>
                        <td>1.45kW</td>
                        <td>x3.25 Speed</td>
                        <td>1.6k</td>
                        <td>84.1k</td>
                        <td>35</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill" style="width: 83.0719%;"></div>
                                <div class="pk-progress-text name">Haskell Engine</div>
                                <span class="pk-tooltipText"></span>
                            </div>
                        </td>
                        <td>4</td>
                        <td>4.22kW</td>
                        <td>x5.00 Speed</td>
                        <td>624</td>
                        <td>54.3k</td>
                        <td>0</td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="table-container ps-3">
                <table class="table mb-0">
                    <thead class="level3">
                    <tr>
                        <th>Fuel</th>
                        <th>Level</th>
                        <th>Energy Cost</th>
                        <th>Effect</th>
                        <th>Xp/Cycle</th>
                        <th>Xp left</th>
                        <th>Max level</th>
                    </tr>
                    </thead>
                    <tbody class="level4">
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill" style="width: 95.0719%;"></div>
                                <div class="pk-progress-text name">Good ol' Whiskey</div>
                                <span class="pk-tooltipText"></span>
                            </div>
                        </td>
                        <td>53</td>
                        <td>259W</td>
                        <td>x1.13 Speed</td>
                        <td>1.6k</td>
                        <td>45.5k</td>
                        <td>124</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill" style="width: 09.0719%;"></div>
                                <div class="pk-progress-text name">Godot Juice</div>
                                <span class="pk-tooltipText"></span>
                            </div>
                        </td>
                        <td>21</td>
                        <td>1.45kW</td>
                        <td>x3.25 Speed</td>
                        <td>1.6k</td>
                        <td>84.1k</td>
                        <td>35</td>
                    </tr>
                    <tr title="Can melt steel beams">
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill" style="width: 75.0719%;"></div>
                                <div class="pk-progress-text name">Jet Fuel</div>
                                <span class="pk-tooltipText"></span>
                            </div>
                        </td>
                        <td>4</td>
                        <td>4.22kW</td>
                        <td>x5.00 Speed</td>
                        <td>624</td>
                        <td>54.3k</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill current" style="width: 48.0719%;"></div>
                                <div class="pk-progress-text name">Alien Blood</div>
                                <span class="pk-tooltipText"></span>
                            </div>
                        </td>
                        <td>0</td>
                        <td>1.45kW</td>
                        <td>x3.25 Speed</td>
                        <td>4.0 k</td>
                        <td>1.6M</td>
                        <td>0</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="level2 ps-3">
            <div class="level2-header bg-light text-dark lead d-flex justify-content-start py-2 px-2">
                <div>
                    <div class="pk-progress-bar progressBar pk-tooltip">
                        <div class="pk-progress-fill progressFill current" style="width: 47%;"></div>
                        <div class="pk-progress-text name">Research Nexus</div>
                        <span class="pk-tooltipText"></span>
                    </div>
                </div>
                <div>
                    Level: 32
                </div>
                <div>
                    <div class="form-check form-switch form-check-reverse">
                        <input class="form-check-input" type="checkbox" role="switch" id="switch4" checked>
                        <label class="form-check-label" for="switch4">Active</label>
                    </div>
                </div>
            </div>
            <div class="table-container ps-3">
                <table class="table mb-0">
                    <thead class="level3">
                    <tr>
                        <th>Technomancy Hub</th>
                        <th>Level</th>
                        <th>Energy Cost</th>
                        <th>Effect</th>
                        <th>Xp/Cycle</th>
                        <th>Xp left</th>
                        <th>Max level</th>
                    </tr>
                    </thead>
                    <tbody class="level4">
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill current" style="width: 52.0719%;"></div>
                                <div class="pk-progress-text name">Arcane Data Array</div>
                                <span class="pk-tooltipText">Harnesses magical energies to enhance data processing speed, significantly reducing research time.</span>
                            </div>
                        </td>
                        <td>53</td>
                        <td>259W</td>
                        <td>x1.13 Research Xp</td>
                        <td>1.6k</td>
                        <td>45.5k</td>
                        <td>124</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill" style="width: 37.0719%;"></div>
                                <div class="pk-progress-text name">Quantum Neural Network</div>
                                <span class="pk-tooltipText">Links researchers' minds in a shared neural network, fostering collaborative research efforts for breakthrough discoveries.</span>
                            </div>
                        </td>
                        <td>21</td>
                        <td>1.45kW</td>
                        <td>x3.25 Research Xp</td>
                        <td>1.6k</td>
                        <td>84.1k</td>
                        <td>35</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill" style="width: 46.0719%;"></div>
                                <div class="pk-progress-text name">Singularity Rift Analysis</div>
                                <span class="pk-tooltipText">Opens micro wormholes to alternate dimensions, allowing access to alternate technological insights.</span>
                            </div>
                        </td>
                        <td>4</td>
                        <td>4.22kW</td>
                        <td>x5.00 Research Xp</td>
                        <td>624</td>
                        <td>54.3k</td>
                        <td>0</td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="table-container ps-3">
                <table class="table mb-0">
                    <thead class="level3">
                    <tr>
                        <th>Bio-Genetic Lab</th>
                        <th>Level</th>
                        <th>Energy Cost</th>
                        <th>Effect</th>
                        <th>Xp/Cycle</th>
                        <th>Xp left</th>
                        <th>Max level</th>
                    </tr>
                    </thead>
                    <tbody class="level4">
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill" style="width: 82.0719%;"></div>
                                <div class="pk-progress-text name">Bioluminescent Growth Chambers</div>
                                <span class="pk-tooltipText">Uses bio-luminescence to accelerate plant growth, yielding enhanced organic resources.</span>
                            </div>
                        </td>
                        <td>53</td>
                        <td>259W</td>
                        <td>x1.13 Research Xp</td>
                        <td>1.6k</td>
                        <td>45.5k</td>
                        <td>124</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill" style="width: 16.0719%;"></div>
                                <div class="pk-progress-text name">Nano-Genome Sequencers</div>
                                <span class="pk-tooltipText">Manipulates nano-scale DNA sequencing for accelerated genetic modification, unlocking new species and traits.</span>
                            </div>
                        </td>
                        <td>21</td>
                        <td>1.45kW</td>
                        <td>x3.25 Research Xp</td>
                        <td>1.6k</td>
                        <td>84.1k</td>
                        <td>35</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="pk-progress-bar progressBar pk-tooltip">
                                <div class="pk-progress-fill progressFill current" style="width: 62.0719%;"></div>
                                <div class="pk-progress-text name">Etherial Transmutation Conduit</div>
                                <span class="pk-tooltipText">Taps into the ethereal plane to facilitate rapid and unconventional cross-species hybridization.</span>
                            </div>
                        </td>
                        <td>4</td>
                        <td>4.22kW</td>
                        <td>x5.00 Research Xp</td>
                        <td>624</td>
                        <td>54.3k</td>
                        <td>0</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</main>
<script type="text/javascript" src="vendor/bootstrap-5.3.1/bootstrap.min.js"></script>
<script type="text/javascript">
    document.querySelectorAll('input.form-check-input').forEach(element => {
        element.addEventListener('change', () => {
            document.querySelector(`label[for="${element.id}"]`).textContent = element.checked ? 'Active' : 'Disabled';
            element.closest('.level2').classList.toggle('inactive', !element.checked);
        });
    });
</script>
</body>
</html>
