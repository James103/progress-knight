<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Web Components</title>
</head>
<body>
<template id="level1Template">
    <div class="level1">
        <div class="level1-header h4 d-flex justify-content-start py-2 px-2 mb-0"
             style="background-color: rgb(199, 21, 133);">
            <div>
                Industry
            </div>
            <div>
                (4.29)
            </div>
        </div>
        <slot id="level2"></slot>
    </div>
</template>

<template id="level2Template">
    <div class="level2 ps-3">
        <div class="level2-header bg-light text-dark lead d-flex justify-content-start py-2 px-2">
            <div>
                <div class="pk-progress-bar progressBar pk-tooltip">
                    <div class="pk-progress-fill progressFill current" style="width: 63%;"></div>
                    <div class="pk-progress-text name">Mining Bay</div>
                    <span class="pk-tooltipText"></span>
                </div>
            </div>
            <div>
                Level: 32
            </div>
            <div>
                <div class="form-check form-switch form-check-reverse">
                    <input class="form-check-input" type="checkbox" role="switch" id="switch1" checked>
                    <label class="form-check-label" for="switch1">Active</label>
                </div>
            </div>
        </div>
        <slot id="level3"></slot>
    </div>
</template>

<main>
<!--    <slot name="level1"></slot>-->
</main>


<script>
    const mainElement = document.querySelector('main');
    /** @type {HTMLTemplateElement} */
    const level1Template = document.getElementById('level1Template');
    /** @type {HTMLTemplateElement} */
    const level2Template = document.getElementById('level2Template');
    // /** @type {HTMLSlotElement} */
    // const level1Slot = document.getElementById('level1');
    // const level1Slot = document.getElementsByName('level1').item(0);
    // level1Slot.assign(level1Template.content.firstElementChild.cloneNode(true));

    let level2Counter = 0;

    /**
     *
     * @param {DocumentFragment} level2Element
     */
    function renderLevel2(level2Element) {
        level2Element.querySelector('.level2-header .name').textContent = ['Mining Bay', 'Refinery', 'Engine'][level2Counter];
        level2Element.getElementById('level3').replaceWith(
            `<p>${['Drills', 'Ore Extraction', 'Thrusters'][level2Counter]}</p>`
        );
        level2Counter++;

        return level2Element;
    }

    /** @type {DocumentFragment} */
    const level1Instance = level1Template.content.cloneNode(true);
    /** @type {HTMLSlotElement} */
    const level2Slot = level1Instance.getElementById('level2');
    level2Slot.replaceWith(
        ...[renderLevel2(level2Template.content.cloneNode(true)),
        renderLevel2(level2Template.content.cloneNode(true)),
        renderLevel2(level2Template.content.cloneNode(true))]
    );
    mainElement.append(level1Instance);
</script>
</body>
</html>
